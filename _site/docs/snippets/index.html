<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Snippets - Beaker Browser</title>
    <meta name="viewport" content="width=device-width">
    <meta http-equiv="refresh" content="0;url=https://docs.beakerbrowser.com" />

    <!-- SEO -->
    <meta name="keywords" content="decentralization,decentralized,Beaker,browser,peer-to-peer,p2p">


    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/font-awesome.css">
    <link rel="icon" href="/img/favicon.png">

    <!-- social woo woo -->

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@BeakerBrowser">
    <meta name="twitter:title" content="Snippets - Beaker Browser">
    <meta name="twitter:description" content="A collection of handy snippets for building p2p websites and apps with the Beaker browser">
    <meta name="twitter:creator" content="@BeakerBrowser">
    <meta name="og:title" content="Snippets - Beaker Browser">
    <meta name="og:description" content="A collection of handy snippets for building p2p websites and apps with the Beaker browser">
    
  </head>

  <body class="layout snippets">
    <header class="header dark">
  <div class="container">
    <a href="/" class="beaker-link">
      <img src="/img/logo/logo-blue.svg" class="logo"/>
      <div class="wordmark">Beaker</div>
    </a>

    <nav class="nav">
  <a class="nav-link" href="/blog">Blog</a>
  <a class="nav-link" href="https://docs.beakerbrowser.com/">Documentation</a>
  <a class="nav-link btn white" href="/install">Install Beaker</a>
</nav>
  </div>
  
</header>

    <div class="container">
      <h1 class="title">
        <span class="fas fa-cut"></span>

        Snippets
      </h1>

      <p class="subheading">
        A collection of handy snippets for building p2p websites and apps in Beaker
      </p>

      <div id="snippet-copied" class="toast">Copied to clipboard</div>
<div class="snippets-container">

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Get a website's title
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-0">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-0">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">archive</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DatArchive</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">info</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">getInfo</span><span class="p">()</span>
<span class="nx">info</span><span class="p">.</span><span class="nx">title</span> <span class="c1">// string</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Get a website's type
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-1">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-1">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">archive</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DatArchive</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">info</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">getInfo</span><span class="p">()</span>
<span class="nx">info</span><span class="p">.</span><span class="nx">type</span> <span class="c1">// array of strings</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Get a website's total size
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-2">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-2">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">archive</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DatArchive</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">info</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">getInfo</span><span class="p">()</span>
<span class="nx">info</span><span class="p">.</span><span class="nx">size</span> <span class="c1">// number (bytes)</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Check if the user can edit a website
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-3">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-3">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">archive</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DatArchive</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">info</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">getInfo</span><span class="p">()</span>
<span class="nx">info</span><span class="p">.</span><span class="nx">isOwner</span> <span class="c1">// boolean</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Get the last published version number of a website
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-4">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-4">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">archive</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DatArchive</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">info</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">getInfo</span><span class="p">()</span>
<span class="nx">info</span><span class="p">.</span><span class="nx">version</span> <span class="c1">// number</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Check when an update was last downloaded
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-5">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-5">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">archive</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DatArchive</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">info</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">getInfo</span><span class="p">()</span>
<span class="nx">info</span><span class="p">.</span><span class="nx">mtime</span> <span class="c1">// number</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Get the number of active peers
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-6">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-6">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">archive</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DatArchive</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">info</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">getInfo</span><span class="p">()</span>
<span class="nx">info</span><span class="p">.</span><span class="nx">peers</span> <span class="c1">// number</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Configure a website's settings
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-7">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-7">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">archive</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DatArchive</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span>
<span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">configure</span><span class="p">({</span>
  <span class="na">title</span><span class="p">:</span> <span class="s1">'The name of the archive'</span><span class="p">,</span>
  <span class="na">description</span><span class="p">:</span> <span class="s1">'A longer description of the archive'</span><span class="p">,</span>
  <span class="na">type</span><span class="p">:</span> <span class="p">[</span><span class="s1">'website'</span><span class="p">]</span>
<span class="p">})</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Create a new website
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-8">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-8">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">await</span> <span class="nx">DatArchive</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
  <span class="na">title</span><span class="p">:</span> <span class="s1">'The name of the archive'</span><span class="p">,</span>
  <span class="na">description</span><span class="p">:</span> <span class="s1">'A longer description of the archive'</span><span class="p">,</span>
  <span class="na">type</span><span class="p">:</span> <span class="p">[</span><span class="s1">'website'</span><span class="p">]</span>
<span class="p">})</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Create a copy of a website
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-9">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-9">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">await</span> <span class="nx">DatArchive</span><span class="p">.</span><span class="nx">fork</span><span class="p">(</span><span class="nx">sourceUrl</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">title</span><span class="p">:</span> <span class="s1">'New name'</span><span class="p">,</span>
  <span class="na">description</span><span class="p">:</span> <span class="s1">'New description'</span>
<span class="p">})</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Open Beaker's website selector modal
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-10">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-10">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">await</span> <span class="nx">DatArchive</span><span class="p">.</span><span class="nx">selectArchive</span><span class="p">({</span>
  <span class="na">prompt</span><span class="p">:</span> <span class="s1">'Select an archive'</span><span class="p">,</span>
  <span class="na">buttonLabel</span><span class="p">:</span> <span class="s1">'Accept'</span>
<span class="p">})</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Use a type filter in the select modal
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-11">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-11">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">await</span> <span class="nx">DatArchive</span><span class="p">.</span><span class="nx">selectArchive</span><span class="p">({</span>
  <span class="na">prompt</span><span class="p">:</span> <span class="s1">'Select a fritter user profile'</span><span class="p">,</span>
  <span class="na">filters</span><span class="p">:</span> <span class="p">{</span><span class="na">isOwner</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="na">type</span><span class="p">:</span> <span class="p">[</span><span class="s1">'user-profile'</span><span class="p">,</span> <span class="s1">'fritter-user-profile'</span><span class="p">]}</span>
<span class="p">})</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Lookup the key of a DNS name
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-12">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-12">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">await</span> <span class="nx">DatArchive</span><span class="p">.</span><span class="nx">resolveName</span><span class="p">(</span><span class="s1">'beakerbrowser.com'</span><span class="p">)</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Check if something is a file or a folder
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-13">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-13">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">st</span> <span class="o">=</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">stat</span><span class="p">(</span><span class="s1">'/foo'</span><span class="p">)</span>
<span class="nx">st</span><span class="p">.</span><span class="nx">isFile</span><span class="p">()</span> <span class="c1">// boolean</span>
<span class="nx">st</span><span class="p">.</span><span class="nx">isDirectory</span><span class="p">()</span> <span class="c1">// boolean</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Read a folder
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-14">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-14">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">readdir</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)</span>
<span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">readdir</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="p">{</span><span class="na">recursive</span><span class="p">:</span> <span class="kc">true</span><span class="p">})</span>
<span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">readdir</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="p">{</span><span class="na">stat</span><span class="p">:</span> <span class="kc">true</span><span class="p">})</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Read a file
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-15">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-15">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="s1">'/index.html'</span><span class="p">,</span> <span class="s1">'utf8'</span><span class="p">)</span>
<span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="s1">'/img/logo/logo.png'</span><span class="p">,</span> <span class="s1">'binary'</span><span class="p">)</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Get the download progress of a file
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-16">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-16">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">st</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">stat</span><span class="p">(</span><span class="s1">'/index.html'</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">percent</span> <span class="o">=</span> <span class="nx">st</span><span class="p">.</span><span class="nx">downloaded</span> <span class="o">/</span> <span class="nx">st</span><span class="p">.</span><span class="nx">blocks</span>
<span class="kd">var</span> <span class="nx">bytes</span> <span class="o">=</span> <span class="nx">st</span><span class="p">.</span><span class="nx">size</span> <span class="o">*</span> <span class="nx">percent</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Get the download progress of a folder
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-17">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-17">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">sts</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">readdir</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="p">{</span><span class="na">recursive</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="na">stat</span><span class="p">:</span> <span class="kc">true</span><span class="p">})</span>
<span class="kd">var</span> <span class="nx">blocks</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">downloaded</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">bytes</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">st</span> <span class="nx">of</span> <span class="nx">sts</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">bytes</span> <span class="o">+=</span> <span class="nx">st</span><span class="p">.</span><span class="nx">stat</span><span class="p">.</span><span class="nx">bytes</span>
  <span class="nx">blocks</span> <span class="o">+=</span> <span class="nx">st</span><span class="p">.</span><span class="nx">stat</span><span class="p">.</span><span class="nx">blocks</span>
  <span class="nx">downloaded</span> <span class="o">+=</span> <span class="nx">st</span><span class="p">.</span><span class="nx">stat</span><span class="p">.</span><span class="nx">downloaded</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">percentDownloaded</span> <span class="o">=</span> <span class="nx">downloaded</span> <span class="o">/</span> <span class="nx">blocks</span>
<span class="kd">var</span> <span class="nx">bytesDownloaded</span> <span class="o">=</span> <span class="nx">size</span> <span class="o">*</span> <span class="nx">percentDownloaded</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Write files and folders
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-18">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-18">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">mkdir</span><span class="p">(</span><span class="s1">'/stuff'</span><span class="p">)</span>
<span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">writeFile</span><span class="p">(</span><span class="s1">'/hello.txt'</span><span class="p">,</span> <span class="nx">str</span><span class="p">,</span> <span class="s1">'utf8'</span><span class="p">)</span>
<span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">writeFile</span><span class="p">(</span><span class="s1">'/beaker.png'</span><span class="p">,</span> <span class="nx">pngBase64</span><span class="p">,</span> <span class="s1">'base64'</span><span class="p">)</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Delete files and folders
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-19">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-19">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">rmdir</span><span class="p">(</span><span class="s1">'/stuff'</span><span class="p">)</span>
<span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">unlink</span><span class="p">(</span><span class="s1">'/hello.txt'</span><span class="p">)</span>
<span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">rmdir</span><span class="p">(</span><span class="s1">'/stuff'</span><span class="p">,</span> <span class="p">{</span><span class="na">recursive</span><span class="p">:</span> <span class="kc">true</span><span class="p">})</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Copy files and folders
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-20">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-20">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="s1">'/stuff'</span><span class="p">,</span> <span class="s1">'/stuff-backup'</span><span class="p">)</span>
<span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="s1">'/hello.txt'</span><span class="p">,</span> <span class="s1">'/goodbye.txt'</span><span class="p">)</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Move/rename files and folders
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-21">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-21">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">rename</span><span class="p">(</span><span class="s1">'/stuff'</span><span class="p">,</span> <span class="s1">'/stuff-backup'</span><span class="p">)</span>
<span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">rename</span><span class="p">(</span><span class="s1">'/hello.txt'</span><span class="p">,</span> <span class="s1">'/subfolder/hello.txt'</span><span class="p">)</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Watch all files
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-22">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-22">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">archive</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DatArchive</span><span class="p">(</span><span class="s1">'dat://beakerbrowser.com'</span><span class="p">)</span>
<span class="nx">archive</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="nx">e</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">path</span><span class="p">,</span> <span class="s1">'has changed'</span><span class="p">))</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Watch specific files or folders
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-23">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-23">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">archive</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DatArchive</span><span class="p">(</span><span class="s1">'dat://beakerbrowser.com'</span><span class="p">)</span>
<span class="nx">archive</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="s1">'/index.html'</span><span class="p">,</span> <span class="nx">e</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'index.html has changed'</span><span class="p">))</span>
<span class="nx">archive</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="s1">'/js/'</span><span class="p">,</span> <span class="nx">e</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'a file in js/ has changed'</span><span class="p">))</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Watch using a glob pattern
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-24">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-24">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">archive</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DatArchive</span><span class="p">(</span><span class="s1">'dat://beakerbrowser.com'</span><span class="p">)</span>
<span class="nx">archive</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="s1">'/posts/*.json'</span><span class="p">,</span> <span class="nx">e</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'a .json file in /posts/ has changed'</span><span class="p">)</span>
<span class="p">})</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Get the change-history of a website
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-25">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-25">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">archive</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DatArchive</span><span class="p">(</span><span class="s1">'dat://beakerbrowser.com'</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">history</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">history</span><span class="p">()</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Get an older version of a website
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-26">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-26">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">archive</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DatArchive</span><span class="p">(</span><span class="s1">'dat://beakerbrowser.com'</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">olderArchive</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">checkout</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Download all files in a website
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-27">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-27">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">archive</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DatArchive</span><span class="p">(</span><span class="s1">'dat://beakerbrowser.com'</span><span class="p">)</span>
<span class="nx">await</span> <span class="nx">archive</span><span class="p">.</span><span class="nx">download</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       List the peers on the site
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-28">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-28">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">peers</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">experimental</span><span class="p">.</span><span class="nx">datPeers</span><span class="p">.</span><span class="nx">list</span><span class="p">()</span>
<span class="nx">peers</span><span class="p">[..].</span><span class="nx">id</span> <span class="c1">// string</span>
<span class="nx">peers</span><span class="p">[..].</span><span class="nx">sessionData</span> <span class="c1">// object</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Watch for connection events
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-29">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-29">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">experimental</span><span class="p">.</span><span class="nx">datPeers</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'connect'</span><span class="p">,</span> <span class="p">({</span><span class="nx">peer</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">peer</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="s1">'has connected'</span><span class="p">)</span>
<span class="p">})</span>
<span class="nx">experimental</span><span class="p">.</span><span class="nx">datPeers</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'disconnect'</span><span class="p">,</span> <span class="p">({</span><span class="nx">peer</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">peer</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="s1">'has disconnected'</span><span class="p">)</span>
<span class="p">})</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Listen to messages from peers
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-30">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-30">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">experimental</span><span class="p">.</span><span class="nx">datPeers</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'message'</span><span class="p">,</span> <span class="p">({</span><span class="nx">peer</span><span class="p">,</span> <span class="nx">message</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">peer</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="s1">'has sent the following message:'</span><span class="p">,</span> <span class="nx">message</span><span class="p">)</span>
<span class="p">})</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Reply to a peer's message
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-31">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-31">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">experimental</span><span class="p">.</span><span class="nx">datPeers</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'message'</span><span class="p">,</span> <span class="p">({</span><span class="nx">peer</span><span class="p">,</span> <span class="nx">message</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">peer</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span><span class="na">my</span><span class="p">:</span> <span class="s1">'reply'</span><span class="p">,</span> <span class="na">message</span><span class="p">:</span> <span class="s1">'is this'</span><span class="p">})</span>
<span class="p">})</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Broadcast a message to all peers
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-32">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-32">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">experimental</span><span class="p">.</span><span class="nx">datPeers</span><span class="p">.</span><span class="nx">broadcast</span><span class="p">({</span><span class="na">my</span><span class="p">:</span> <span class="s1">'message'</span><span class="p">})</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Set session data for all peers to read
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-33">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-33">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">experimental</span><span class="p">.</span><span class="nx">datPeers</span><span class="p">.</span><span class="nx">setSessionData</span><span class="p">({</span>
  <span class="na">name</span><span class="p">:</span> <span class="s1">'Bob'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'dat://1234..56'</span>
<span class="p">})</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Listen for peers to set their session data
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-34">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-34">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">experimental</span><span class="p">.</span><span class="nx">datPeers</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'session-data'</span><span class="p">,</span> <span class="p">({</span><span class="nx">peer</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">peer</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="s1">'has set their session data to'</span><span class="p">,</span> <span class="nx">peer</span><span class="p">.</span><span class="nx">sessionData</span><span class="p">)</span>
<span class="p">})</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       List all of the user's saved dat archives
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-35">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-35">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">archiveInfos</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">experimental</span><span class="p">.</span><span class="nx">library</span><span class="p">.</span><span class="nx">list</span><span class="p">()</span>
<span class="nx">archiveInfos</span><span class="p">[..].</span><span class="nx">url</span> <span class="c1">// string</span>
<span class="nx">archiveInfos</span><span class="p">[..].</span><span class="nx">title</span> <span class="c1">// string</span>
<span class="nx">archiveInfos</span><span class="p">[..].</span><span class="nx">isOwner</span> <span class="c1">// boolean</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Save or unsave a dat archive
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-36">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-36">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">await</span> <span class="nx">experimental</span><span class="p">.</span><span class="nx">library</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">datUrl</span><span class="p">)</span>
<span class="nx">await</span> <span class="nx">experimental</span><span class="p">.</span><span class="nx">library</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">datUrl</span><span class="p">)</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Prompt to save or unsave an archive
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-37">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-37">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">await</span> <span class="nx">experimental</span><span class="p">.</span><span class="nx">library</span><span class="p">.</span><span class="nx">requestAdd</span><span class="p">(</span><span class="nx">datUrl</span><span class="p">)</span>
<span class="nx">await</span> <span class="nx">experimental</span><span class="p">.</span><span class="nx">library</span><span class="p">.</span><span class="nx">requestRemove</span><span class="p">(</span><span class="nx">datUrl</span><span class="p">)</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Make a cross-origin Ajax request
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-38">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-38">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">experimental</span><span class="p">.</span><span class="nx">globalFetch</span><span class="p">(</span><span class="s1">'https://example.com'</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">res</span><span class="p">.</span><span class="nx">text</span><span class="p">()</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Take a screenshot of a page
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-39">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-39">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">png</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">experimental</span><span class="p">.</span><span class="nx">capturePage</span><span class="p">(</span><span class="s1">'dat://beakerbrowser.com'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">width</span><span class="p">:</span> <span class="mi">1024</span><span class="p">,</span>
  <span class="na">height</span><span class="p">:</span> <span class="mi">768</span>
<span class="p">})</span></code></pre></figure>

    </div>
  </div>

  <div class="snippet">
    <div class="snippet-heading">
      <span href="/docs/snippets/" class="snippet-title">
       Take a thumbnail screenshot of a page
      </span>

      <button class="btn plain copy-snippet" tooltip="Copy snippet" data-target="snippet-40">
        <span class="fa fa-paste"></span>
      </button>
   </div>

   

    <div class="snippet-content" id="snippet-40">

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">png</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">experimental</span><span class="p">.</span><span class="nx">capturePage</span><span class="p">(</span><span class="s1">'dat://beakerbrowser.com'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">width</span><span class="p">:</span> <span class="mi">1024</span><span class="p">,</span>
  <span class="na">height</span><span class="p">:</span> <span class="mi">768</span><span class="p">,</span>
  <span class="na">resizeTo</span><span class="p">:</span> <span class="p">{</span><span class="na">width</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="na">height</span><span class="p">:</span> <span class="mi">150</span><span class="p">}</span>
<span class="p">})</span></code></pre></figure>

    </div>
  </div>

</div>

    </div>

    <footer class="footer">
  <div class="container">
    <div class="col">
      <div>
        <a href="/" class="beaker-link">
          <img src="/img/logo/logo.png" class="logo"/>
          <div class="wordmark">Beaker</div>
        </a>
      </div>
      <div>
        <a href="/install/" class="btn outline white">Install Beaker</a>
      </div>
    </div>

    <div class="col">
      <div class="links">
        <a href="/blog">Blog</a>
        <a href="https://docs.beakerbrowser.com/">Documentation</a>
        <a href="/install/">Install Beaker</a>
        <br>
        <a href="/vuln-disclosure/">Vulnerability Disclosure Policy</a>
      </div>
    </div>

    <div class="col">
      <div class="links">
        <a href="https://twitter.com/beakerbrowser">Twitter</a>
        <a href="https://github.com/beakerbrowser/beaker">GitHub</a>
        <a href="https://webchat.freenode.net">#beakerbrowser on freenode</a>
      </div>
    </div>
  </div>
</footer>

  </body>

  <script src="/js/snippets.js"></script>
  <script>window.sa_event=window.sa_event||function(){a=[].slice.call(arguments);sa_event.q?sa_event.q.push(a):sa_event.q=[a]};</script>
<script async defer src="https://sa.beakerbrowser.com/latest.js"></script>
<noscript><img src="https://sa.beakerbrowser.com/noscript.gif" alt=""></noscript>
</html>
